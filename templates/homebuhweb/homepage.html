<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>ДОМАШНЯЯ БУХГАЛТЕРИЯ</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/album/">

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
        :root {
            --primary-color: #63815c;
            --secondary-color: #f2e08b;
            --hover-color: #bed2dd;
            --secondary-hover-color: #a4af0b;
            --background-color: #f7f0c6;
            --footer-color: #63815c;
            --footer-text-color: #f2e08b;
            --footer-link-color: #c28101;
            --footer-p-color: #ffc000;
            --modal-header-color: #63815c;
            --modal-header-text-color: white;
            --modal-footer-color: #63815c;
            --modal-footer-text-color: white;
        }

        .navbar-custom {
            background-color: var(--primary-color);
            color: var(--secondary-color);
        }

        .navbar-custom .navbar-brand {
            color: var(--secondary-color);
        }

        .navbar-custom .navbar-toggler-icon {
            background-color: var(--secondary-color);
        }

        .main-custom {
            background-color: var(--background-color);
        }

        .btn-custom, .btn-secondary-custom {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-custom:hover, .btn-secondary-custom:hover {
            background-color: var(--hover-color);
            color: black;
        }

        .btn-secondary-custom {
            background-color: var(--secondary-hover-color);
            color: black;
        }

        .footer-custom {
            background-color: var(--footer-color);
            color: var(--footer-text-color);
        }

        .footer-custom a {
            color: var(--footer-link-color);
        }

        .footer-custom p {
            color: var(--footer-p-color);
        }

        .modal-content {
            background-color: var(--background-color);
        }

        .form-control {
            background-color: var(--background-color);
            color: var(--primary-color);
        }

        .form-control::placeholder {
            color: var(--primary-color);
        }

        .modal-header {
            background-color: var(--modal-header-color);
            color: var(--modal-header-text-color);
        }

        .modal-footer {
            background-color: var(--modal-footer-color);
            color: var(--modal-footer-text-color);
        }

        .btn-close {
            color: var(--modal-header-text-color);
        }

        .btn-inverted {
            background-color: white;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }

        .btn-inverted:hover {
            background-color: var(--hover-color);
            color: black;
        }
    </style>
</head>
<body>
<header>
    <div class="navbar navbar-custom shadow-sm">
        <div class="container">
            <a href="#" class="navbar-brand d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
                     stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true" class="me-2"
                     viewBox="0 0 24 24">
                    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                    <circle cx="12" cy="13" r="4"/>
                </svg>
                <strong>ДОМАШНЯЯ БУХГАЛТЕРИЯ</strong>
            </a>
        </div>
    </div>
</header>

<main class="main-custom">
    <section class="py-5 text-center container">
        <div class="row py-lg-5">
            <div class="col-lg-6 col-md-8 mx-auto">
                <h1 class="fw-light">ДОМАШНЯЯ БУХГАЛТЕРИЯ</h1>
                <p class="lead text-muted">Something short and leading about the collection below—its contents, the
                    creator, etc. Make it short and sweet, but not too short so folks don’t simply skip over it
                    entirely.</p>
                <p>
                    <button class="btn btn-custom my-2" data-bs-toggle="modal" data-bs-target="#loginModal">Вход
                    </button>
                    <button class="btn btn-secondary-custom my-2" data-bs-toggle="modal"
                            data-bs-target="#registrationModal">Регистрация
                    </button>
                </p>
            </div>
        </div>
    </section>
</main>

<!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">АВТОРИЗАЦИЯ</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" id="loginForm">
                    <span class="heading"></span>
                    <div class="form-group">
                        <input type="text" class="form-control" id="inputLogin"
                               placeholder="Введите E-mail или Username">
                        <i class="fa fa-user"></i>
                    </div>
                    <div class="form-group help">
                        <input type="password" class="form-control" id="inputPassword" placeholder="Введите пароль">
                        <i class="fa fa-lock"></i>
                        <a href="#" class="fa fa-question-circle"></a>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-inverted" data-bs-dismiss="modal">Отмена</button>
                <button type="button" class="btn btn-secondary btn-inverted" onclick="handleLogin()">Войти</button>
            </div>
        </div>
    </div>
</div>

<script>
    function handleLogin() {
        const usernameOrEmail = document.getElementById('inputLogin').value;
        const password = document.getElementById('inputPassword').value;

        fetch('/check_user/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken')
            },
            body: JSON.stringify({usernameOrEmail, password})
        })
            .then(response => response.json())
            .then(data => {
                if (data.exists) {
                    window.location.href = '/usercabinet/';
                } else {
                    alert('Такого пользователя не существует. Проверьте логин и пароль или пройдите регистрацию.');
                    $('#loginModal').modal('hide');
                }
            })
            .catch(error => console.error('Error:', error));
    }

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
</script>

<!-- Registration Modal -->
<div class="modal fade" id="registrationModal" tabindex="-1" aria-labelledby="registrationModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="registrationModalLabel">Регистрация</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form class="form-horizontal">
                    <span class="heading">РЕГИСТРАЦИЯ</span>
                    <div class="form-group">
                        <input type="text" class="form-control" id="inputUsername" placeholder="Username">
                        <i class="fa fa-user"></i>
                    </div>
                    <div class="form-group">
                        <input type="email" class="form-control" id="inputEmail" placeholder="E-mail">
                        <i class="fa fa-envelope"></i>
                    </div>
                    <div class="form-group help">
                        <input type="password" class="form-control" id="inputPassword" placeholder="Password">
                        <i class="fa fa-lock"></i>
                    </div>
                    <div class="form-group help">
                        <input type="password" class="form-control" id="inputConfirmPassword"
                               placeholder="Confirm Password">
                        <i class="fa fa-lock"></i>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-inverted" data-bs-dismiss="modal">Отмена</button>
                <button type="button" class="btn btn-secondary btn-inverted">Зарегистрировать</button>
            </div>
        </div>
    </div>
</div>

<footer class="footer-custom text-muted py-5">
    <div class="container">
        <p class="float-end mb-1">
            <a href="#">Back to top</a>
        </p>
        <p class="mb-1">Album example is © Bootstrap, but please download and customize it for yourself!</p>
        <p class="mb-0">New to Bootstrap? <a href="/">Visit the homepage</a> or read our <a
                href="../getting-started/introduction/">getting started guide</a>.</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>
</html>